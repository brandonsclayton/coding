

<html>
  <button type="button" id="b1">Click</button>
  <div id="visualization">Loading</div>

	<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<script type="text/javascript">
    
  msg_history('start');
    
  function msg_history(state)
  {
    google.charts.load('current', {'packages':['line']});
   	
    google.charts.setOnLoadCallback(function()
    {
      var options = 
      {
        width: 400,
        height: 240,
        vAxis: {minValue:0, maxValue:100},
        animation: 
        {
          duration: 1000,
          easing: 'in'
        }
      };

      if (state == 'start')
      {
        //var chart = new google.visualization.LineChart(document.getElementById('visualization'));
        var chart = new google.charts.Line(document.getElementById('visualization'));
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'x');
        data.addColumn('number', 'y');
        data.addRow(['1', 123]);
        data.addRow(['2', 17]);
      }
      var button = document.getElementById('b1');
    
      function drawChart() 
      {
        chart.draw(data, options);
      }

      button.onclick = function() 
      {
        // Generating a random x, y pair and inserting it so rows are sorted.
        var y = Math.floor(Math.random() * 100);
        var where = 0;
        while (where < data.getNumberOfRows() ) 
        {
          where++;
        }
        x = where+1;
        data.insertRows(where, [[x.toString(), y]]);
        drawChart();
      }
      drawChart();
    });
  }

</script>


</html>
